// Generated by CoffeeScript 1.6.3
(function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;t=null;s=null;c=null;o=[];h=[];u=null;n=function(e){var t,n,i;t=new RegExp("http://");i=new RegExp("https://");if(!t.test(e)||i.test(e))e="http://"+e;n=new RegExp(/\/#/);while(n.test(e))e=e.replace(/\/#/,"");$("#address").val(e);$(".viewport").each(function(){var t;t=$(this).find("iframe");t.attr("src",e);return t.css({height:$(this).find(".height").val(),width:$(this).find(".width").val()})});$(".viewport").each(function(){var e;e=$(this).find("iframe");return e.attr("src",e.attr("scr"))});return r()};i=function(e){var t,n;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");t=new RegExp("[\\?&]"+e+"=([^&#]*)");n=t.exec(location.search);return n===null?"":decodeURIComponent(n[1].replace(/\+/g," "))};l=function(){var r,a,f,l,p,d,v;t=i("address");s=i("height");c=i("width");t!==""?$("#address").val(t):t=$("#address").val();if(s!==""&&c!==""){f=s.split(",");l=c.split(",");if(f.length===l.length){o=f;h=l}else{s=u.find(".height").val();o.push(s);p=u.find(".width").val();h.push(c)}}else{s=u.find(".height").val();o.push(s);c=u.find(".width").val();h.push(c)}if(h.length>1&&o.length>1)for(a=d=1,v=h.length-1;1<=v?d<=v:d>=v;a=1<=v?++d:--d)e();r=0;$(".viewport").each(function(){$(this).find(".height").val(o[r]);$(this).find(".width").val(h[r]);return r++});n(t)};e=function(e){var t,n,i;e==null&&(e=!1);n=u.clone();$(".main-container").append(n);if(e){i=$("#size-selector").val();t=i.split("|");n.find(".height").val(t[0]);n.find(".width").val(t[1]);n.find("iframe").css({height:t[0],width:t[1]});o.push(t[0]);h.push(t[1]);r()}};r=function(){var e,n,r;f();r=window.location.protocol+"//"+window.location.host+window.location.pathname;e=[];e.push("address="+t);e.push("width="+h.join(","));e.push("height="+o.join(","));n=e.join("&");r=""+r+"?"+n;console.log(r);window.history.pushState("","Responsive Tool",r)};f=function(){o=[];h=[];$(".viewport").each(function(){var e;e=$(this).find("iframe");o.push($(this).find(".height").val());return h.push($(this).find(".width").val())});t=$("#address").val()};a=function(e){if($(".viewport").length>1){e.remove();r()}else alert("Cant remove all viewports")};$(function(){u=$(".viewport").eq(0);l();$("#submit").click(function(){return n($("#address").val())});$("#new").click(function(){return e(!0)});return $("body").on("click",".remove",function(){return a($(this).parent().parent())})})}).call(this);